var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r));"undefined"!=typeof require&&require;import{a as s,R as u,r as m,l as p,j as d,u as f,S as E,b as N,c as h}from"./vendor.a25fbad5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I=u.createContext({municipios:[],setMunicipios:e=>null});function O({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{p.getItem("municipios").then((e=>{null===e||0===e.length?async function(){return await s.get("maestro/municipios").then((e=>e.data)).then((e=>e.map((e=>l(c({},e),{CODIGOINE:e.CODIGOINE.substr(0,5)})))))}().then((async e=>await p.setItem("municipios",e))).then((e=>n(e))).catch((e=>console.error(e))):n(e)})).catch((e=>console.error(e)))}),[]),u.createElement(I.Provider,{value:{municipios:t,setMunicipios:n}},e)}const v=u.createContext({municipiosGuardados:[],guardarMunicipios:()=>{}});function _({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{p.setItem("municipiosGuardados",t).catch((e=>console.error(e)))}),[t]),m.exports.useEffect((()=>{p.getItem("municipiosGuardados").then((e=>{null!==e&&e.length>0&&n(e)})).catch((e=>console.error(e)))}),[]),u.createElement(v.Provider,{value:{municipiosGuardados:t,guardarMunicipios:n}},e)}function b(){const{municipios:e}=m.exports.useContext(I),t=m.exports.useCallback((t=>e.find((e=>e.CODIGOINE===t))),[e]);return{municipios:e,findMunicipio:t}}function y(e){const{municipios:t,findMunicipio:n}=b(),[r,i]=m.exports.useState(!1),[a,o]=m.exports.useState();return m.exports.useEffect((()=>{const t=n(e);void 0!==t&&(i(!0),async function(e,t){return await s.get(`provincias/${e}/municipios/${t}`).then((e=>e.data))}(t.CODPROV,t.CODIGOINE).then((e=>o(e))).finally((()=>i(!1))))}),[e,t]),{tiempo:a,loading:r}}function g(e){const{tiempo:t}=y(e.id);return u.createElement(u.Fragment,null,u.createElement("pre",null,u.createElement("code",null,JSON.stringify(t,null,2))))}var C="_video_1cbf3_1",x="_videoContainer_1cbf3_7",M="_indexContainer_1cbf3_17",k="_containerMunicipios_1cbf3_26";var w="_autoCompleteBox_bmfp7_1",G="_autocompleteWrapper_bmfp7_11",D="_item_bmfp7_15",L="_itemLink_bmfp7_20";var j="_input_gsffu_1";function S(e){var t;return u.createElement(u.Fragment,null,u.createElement("input",l(c({},e),{className:`${j} ${null!=(t=e.className)?t:""}`})))}function T(e){const[t,n]=m.exports.useState([]),[r,i]=m.exports.useState(""),[a,o]=m.exports.useState(null),s=m.exports.useRef([]),p=m.exports.useRef(null);m.exports.useEffect((()=>(document.addEventListener("click",f,!1),()=>{document.removeEventListener("click",f,!1)})),[]);const f=e=>{null===(null==p?void 0:p.current)||p.current.contains(e.target)||n([])},E=m.exports.useCallback(d((e=>i(e)),500),[i]),N=e=>{if("ArrowDown"!==e.key&&"ArrowUp"!==e.key)return;const t=null===a?0:s.current.indexOf(a);let n;if("ArrowDown"===e.key){const e=t+1===s.current.length?0:t+1;n=s.current[e]}else{const e=t-1<0?s.current.length-1:t-1;n=s.current[e]}o(n),n.focus()};return m.exports.useEffect((()=>{var t;return n(e.items.filter((e=>e.label.toLocaleLowerCase().includes(r.toLocaleLowerCase()))).slice(0,null!=(t=e.limit)?t:50))}),[r]),u.createElement(u.Fragment,null,u.createElement("div",{className:G,ref:p},u.createElement(S,l(c({},e.input),{onFocus:()=>o(null),onChange:e=>E(e.target.value),onKeyDown:e=>N(e)})),u.createElement("ul",{className:w},t.map((t=>u.createElement("li",{key:t.id,className:D},u.createElement("a",{onClick:r=>{r.preventDefault(),e.onClickItem(t),n([])},onKeyDown:e=>N(e),ref:e=>null!==e?s.current.push(e):null,className:L},t.label)))))))}function F(){const{guardarMunicipios:e,municipiosGuardados:t}=m.exports.useContext(v);return{municipiosGuardados:t,addNewMunicipio:m.exports.useCallback((t=>{e((e=>e.some((e=>t.CODIGOINE===e.CODIGOINE))?e:[...e,t]))}),[t]),deleteMunicipio:m.exports.useCallback((t=>{e((e=>e.filter((e=>e.CODIGOINE!==t.CODIGOINE))))}),[t])}}function J(){const{municipios:e}=b(),[,t]=f(),{addNewMunicipio:n}=F();return u.createElement(T,{input:{placeholder:"Busca tu ciudad"},limit:10,placeholder:"Localidad",items:e.map((e=>({id:e.CODIGOINE,label:e.NOMBRE,value:e}))),onClickItem:e=>{n(e.value),t(`/t/${e.id}`)}})}var P="_municipio_1phhg_1",R="_municipioNombre_1phhg_10",z="_subTitle_1phhg_16",B="_municipioTemperatura_1phhg_27";var Y="_ldsRipple_jewt7_1";function U({show:e,children:t}){return u.createElement(u.Fragment,null,e?u.createElement("div",{className:Y},u.createElement("div",null),u.createElement("div",null)):t)}function W({municipio:e}){const{loading:t,tiempo:n}=y(e.CODIGOINE);return u.createElement(u.Fragment,null,u.createElement("div",{className:P,key:e.CODIGOINE},u.createElement("span",{className:R},e.NOMBRE),u.createElement(U,{show:t},u.createElement("h1",{className:B}," ",null==n?void 0:n.temperatura_actual,"ยบ"),u.createElement("span",{className:z},"Max: ",null==n?void 0:n.temperaturas.max,"ยบ Min: ",null==n?void 0:n.temperaturas.min),u.createElement("span",{className:z},"Humedad: ",null==n?void 0:n.humedad,"%"),u.createElement("span",{className:z},"Cielo: ",null==n?void 0:n.stateSky.description))))}function q(){const{municipiosGuardados:e}=F();return u.createElement(u.Fragment,null,u.createElement("div",{className:M},u.createElement(J,null),u.createElement("div",{className:k},e.map((e=>u.createElement(W,{municipio:e,key:e.CODIGOINE}))))),u.createElement("div",{className:x},u.createElement("video",{autoPlay:!0,className:C,loop:!0},u.createElement("source",{src:"https://weather.asanchis.dev/assets/video.a0c259db.webm"}))))}function A(){return u.createElement(u.Fragment,null,u.createElement(E,null,u.createElement(N,{path:"/",component:q}),u.createElement(N,{path:"/t/:id"},(e=>u.createElement(g,{id:e.id})))))}s.defaults.baseURL="https://opendata.aemet.es/opendata/api/",s.defaults.headers.api_key="eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJzYW5jaGlzMTk5MkBnbWFpbC5jb20iLCJqdGkiOiIyNDk5YTI0OS00NmMzLTRiNDMtYTA0YS02MGY1M2Q5NTY2NzIiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTYzMTM5OTQ4NiwidXNlcklkIjoiMjQ5OWEyNDktNDZjMy00YjQzLWEwNGEtNjBmNTNkOTU2NjcyIiwicm9sZSI6IiJ9.wCeUbIJ5IuX5x2F4h2Cq1cM75zuhMs2nv-miLfmke1k",h.render(u.createElement(u.StrictMode,null,u.createElement(O,null,u.createElement(_,null,u.createElement(A,null)))),document.getElementById("root"));
