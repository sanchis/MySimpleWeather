var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&l(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&l(e,n,t[n]);return e},s=(e,r)=>t(e,n(r));"undefined"!=typeof require&&require;import{a as o,R as u,r as m,l as d,j as p,u as f,S as E,b as v,c as y}from"./vendor.a25fbad5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _=u.createContext({cities:[],setCities:e=>null});function h({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{d.getItem("cities").then((e=>{null===e||0===e.length?async function(){return await o.get("maestro/municipios").then((e=>e.data))}().then((async e=>await d.setItem("cities",e))).then((e=>n(e))).catch((e=>console.error(e))):n(e)})).catch((e=>console.error(e)))}),[]),u.createElement(_.Provider,{value:{cities:t,setCities:n}},e)}const C=u.createContext({citiesSaved:[],saveCities:()=>{}});function b({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{d.setItem("saveCities",t).catch((e=>console.error(e)))}),[t]),m.exports.useEffect((()=>{d.getItem("saveCities").then((e=>{null!==e&&e.length>0&&n(e)})).catch((e=>console.error(e)))}),[]),u.createElement(C.Provider,{value:{citiesSaved:t,saveCities:n}},e)}function N(){const{cities:e}=m.exports.useContext(_),t=m.exports.useCallback((t=>e.find((e=>e.id===t))),[e]);return{cities:e,findCity:t}}function g(e){const{cities:t,findCity:n}=N(),[r,a]=m.exports.useState(!1),[i,l]=m.exports.useState();return m.exports.useEffect((()=>{const t=n(e);void 0!==t&&(a(!0),async function(e){return await o.get(`prediccion/especifica/municipio/diaria/${e}`).then((e=>e.data)).then((async({datos:e})=>await o.get(e))).then((e=>e.data[0]))}(t.id_old).then((e=>l(e))).finally((()=>a(!1))))}),[e,t]),{weather:i,loading:r}}function w(e){const{weather:t}=g(e.id);return u.createElement(u.Fragment,null,u.createElement("pre",null,u.createElement("code",null,JSON.stringify(t,null,2))))}var x="_video_1955m_1",k="_videoContainer_1955m_7",I="_indexContainer_1955m_17",O="_containerCities_1955m_26";var L="_autoCompleteBox_bmfp7_1",M="_autocompleteWrapper_bmfp7_11",S="_item_bmfp7_15",j="_itemLink_bmfp7_20";var T="_input_gsffu_1";function F(e){var t;return u.createElement(u.Fragment,null,u.createElement("input",s(c({},e),{className:`${T} ${null!=(t=e.className)?t:""}`})))}function J(e){const[t,n]=m.exports.useState([]),[r,a]=m.exports.useState(""),[i,l]=m.exports.useState(null),o=m.exports.useRef([]),d=m.exports.useRef(null);m.exports.useEffect((()=>(document.addEventListener("click",f,!1),()=>{document.removeEventListener("click",f,!1)})),[]);const f=e=>{null===(null==d?void 0:d.current)||d.current.contains(e.target)||n([])},E=m.exports.useCallback(p((e=>a(e)),500),[a]),v=e=>{if("ArrowDown"!==e.key&&"ArrowUp"!==e.key)return;const t=null===i?0:o.current.indexOf(i);let n;if("ArrowDown"===e.key){const e=t+1===o.current.length?0:t+1;n=o.current[e]}else{const e=t-1<0?o.current.length-1:t-1;n=o.current[e]}l(n),n.focus()};return m.exports.useEffect((()=>{var t;return n(e.items.filter((e=>e.label.toLocaleLowerCase().includes(r.toLocaleLowerCase()))).slice(0,null!=(t=e.limit)?t:50))}),[r]),u.createElement(u.Fragment,null,u.createElement("div",{className:M,ref:d},u.createElement(F,s(c({},e.input),{onFocus:()=>l(null),onChange:e=>E(e.target.value),onKeyDown:e=>v(e)})),u.createElement("ul",{className:L},t.map((t=>u.createElement("li",{key:t.id,className:S},u.createElement("a",{onClick:r=>{r.preventDefault(),e.onClickItem(t),n([])},onKeyDown:e=>v(e),ref:e=>null!==e?o.current.push(e):null,className:j},t.label)))))))}function D(){const{saveCities:e,citiesSaved:t}=m.exports.useContext(C);return{savedCities:t,addNewCity:m.exports.useCallback((t=>{e((e=>e.some((e=>t.id===e.id))?e:[...e,t]))}),[t]),deleteCity:m.exports.useCallback((t=>{e((e=>e.filter((e=>e.id!==t.id))))}),[t])}}function z(){const{cities:e}=N(),[,t]=f(),{addNewCity:n}=D();return u.createElement(J,{input:{placeholder:"Busca tu ciudad"},limit:10,placeholder:"Localidad",items:e.map((e=>({id:e.id,label:e.nombre,value:e}))),onClickItem:e=>{n(e.value),t(`/t/${e.id}`)}})}var P="_city_1w9sg_1",Y="_cityNombre_1w9sg_10",R="_subTitle_1w9sg_16",B="_cityTemperatura_1w9sg_27";var U="_ldsRipple_jewt7_1";function W({show:e,children:t}){return u.createElement(u.Fragment,null,e?u.createElement("div",{className:U},u.createElement("div",null),u.createElement("div",null)):t)}function q({city:e}){const{loading:t}=g(e.id_old);return u.createElement(u.Fragment,null,u.createElement("div",{className:P},u.createElement("span",{className:Y},e.nombre),u.createElement(W,{show:t},u.createElement("h1",{className:B}," 0ยบ"),u.createElement("span",{className:R},"Max: 0ยบ Min: 0"),u.createElement("span",{className:R},"Humedad: 0%"),u.createElement("span",{className:R},"Cielo: 0"))))}function A(){const{savedCities:e}=D();return u.createElement(u.Fragment,null,u.createElement("div",{className:I},u.createElement(z,null),u.createElement("div",{className:O},e.map((e=>u.createElement(q,{city:e,key:e.id}))))),u.createElement("div",{className:k},u.createElement("video",{autoPlay:!0,className:x,loop:!0},u.createElement("source",{src:"https://weather.asanchis.dev/assets/video.a0c259db.webm"}))))}function G(){return u.createElement(u.Fragment,null,u.createElement(E,null,u.createElement(v,{path:"/",component:A}),u.createElement(v,{path:"/t/:id"},(e=>u.createElement(w,{id:e.id})))))}o.defaults.baseURL="https://opendata.aemet.es/opendata/api/",o.defaults.params={api_key:"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJzYW5jaGlzMTk5MkBnbWFpbC5jb20iLCJqdGkiOiIyNDk5YTI0OS00NmMzLTRiNDMtYTA0YS02MGY1M2Q5NTY2NzIiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTYzMTM5OTQ4NiwidXNlcklkIjoiMjQ5OWEyNDktNDZjMy00YjQzLWEwNGEtNjBmNTNkOTU2NjcyIiwicm9sZSI6IiJ9.wCeUbIJ5IuX5x2F4h2Cq1cM75zuhMs2nv-miLfmke1k"},y.render(u.createElement(u.StrictMode,null,u.createElement(h,null,u.createElement(b,null,u.createElement(G,null)))),document.getElementById("root"));
