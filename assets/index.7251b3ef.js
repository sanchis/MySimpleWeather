var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,o=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))i.call(t,n)&&l(e,n,t[n]);return e},s=(e,a)=>t(e,n(a));"undefined"!=typeof require&&require;import{a as c,i as u,R as d,r as m,l as p,j as f,f as v,e as h,b as g}from"./vendor.f4388129.js";function y(e){const t=["00-06","06-12","12-18","18-24"],n=[];return e.filter((e=>t.includes(e.periodo))).forEach((e=>{if(t.includes(e.periodo)){const t=e.periodo.split("-"),a=Number(t[0])+1,r=Number(t[1])+1;for(let i=a;i<r;i++)n.push({hour:"24"===i.toString().padStart(2,"0")?"00":i.toString().padStart(2,"0"),value:e.value})}})),n}function E(e){const t=[];return e.unshift({hora:0,value:e[0].value}),e.forEach(((n,a)=>{if(24!==n.hora){const r=Math.abs(e[a+1].value-n.value)/6;for(let i=n.hora;i<e[a+1].hora;i++){const l=r*(i-n.hora);t.push({hour:i.toString(),value:e[a+1].value>n.value?n.value+l:n.value-l})}}else t.push({hour:"00",value:n.value})})),t}function b(e){var t;const n=(new Date).getHours(),a=(new Date).getHours().toString().padStart(2,"0"),r=null==(t=e.estadoCielo.find((e=>e.hour===a)))?void 0:t.value.toString(),i=n>=7&&n<=10,l=n>=11&&n<=17,o=n>=18&&n<=22;return void 0===r?"./day-sunny.jpg":void 0!==r&&["43","43n","44","44n","45","46","23","23n","24","24n","25","26"].includes(r)?"./day-rain.png":void 0!==r&&["51","51n","52","52n","53","54","61","61n","62","62n","63","64"].includes(r)?"./electrical-storm.jpg":void 0!==r&&["71","71n","72","72n","73","74","33","33n","34","34n","35","36"].includes(r)?"./snow.jpg":void 0!==r&&["12","12n","14","14n","13n","13","17","17n"].includes(r)?i?"./sunrise-cloudy.jpg":l?"./day-cloudy.jpg":"./sunset-cloudy.jpg":void 0!==r&&["11","11n","81","82","83"].includes(r)?i?"./sunrise-sunny.jpg":l?"./day-sunny.jpg":o?"./sunset-sunny.jpg":"./night.jpg":void 0!==r&&["15","16"].includes(r)?"./cover.jpg":"./day-sunny.jpg"}async function _(e){return await c.get(`prediccion/especifica/municipio/diaria/${e.replace("id","")}`).then((e=>e.data)).then((e=>{if(200!==e.estado)throw new Error(e.descripcion);return e})).then((async({datos:e})=>await c.get(e))).then((e=>{var t;return{data:e.data[0].prediccion.dia.find((e=>u(new Date(e.fecha)))),name:e.data[0].nombre,date:null==(t=e.data[0].prediccion.dia.find((e=>u(new Date(e.fecha)))))?void 0:t.fecha}})).then((e=>{if(void 0!==(null==e?void 0:e.data)&&void 0!==(null==e?void 0:e.date))return t=e.data,n=e.name,a=new Date(null==e?void 0:e.date),{name:n,date:a,probPrecipitaciones:y(t.probPrecipitacion),humedadMinMax:{max:t.humedadRelativa.maxima,min:t.humedadRelativa.minima},temperaturaMinMax:{max:t.sensTermica.maxima,min:t.sensTermica.minima},estadoCielo:(r=t.estadoCielo,y(r.map((e=>({periodo:e.periodo,value:e.value}))))),humedad:E(t.humedadRelativa.dato),temperatura:E(t.sensTermica.dato)};throw new Error("No data found");var t,n,a,r}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const w=d.createContext({cities:[],setCities:e=>null});function C({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{p.getItem("cities").then((e=>{null===e||0===e.length?async function(){return await c.get("maestro/municipios").then((e=>e.data))}().then((async e=>await p.setItem("cities",e))).then((e=>n(e))).catch((e=>console.error(e))):n(e)})).catch((e=>console.error(e)))}),[]),d.createElement(w.Provider,{value:{cities:t,setCities:n}},e)}const N=d.createContext({citiesSaved:[],saveCities:()=>{}});function x({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{p.setItem("saveCities",t).catch((e=>console.error(e)))}),[t]),m.exports.useEffect((()=>{p.getItem("saveCities").then((e=>{null!==e&&e.length>0&&n(e)})).catch((e=>console.error(e)))}),[]),d.createElement(N.Provider,{value:{citiesSaved:t,saveCities:n}},e)}var k="_mainContainer_1w5gh_1";var S="_autoCompleteBox_bmfp7_1",j="_autocompleteWrapper_bmfp7_11",I="_item_bmfp7_15",L="_itemLink_bmfp7_20";var M="_input_gsffu_1";function O(e){var t;return d.createElement(d.Fragment,null,d.createElement("input",s(o({},e),{className:`${M} ${null!=(t=e.className)?t:""}`})))}function D(e){const[t,n]=m.exports.useState([]),[a,r]=m.exports.useState(""),[i,l]=m.exports.useState(null),c=m.exports.useRef([]),u=m.exports.useRef(null);m.exports.useEffect((()=>(document.addEventListener("click",p,!1),()=>{document.removeEventListener("click",p,!1)})),[]);const p=e=>{null===(null==u?void 0:u.current)||u.current.contains(e.target)||n([])},v=m.exports.useCallback(f((e=>r(e)),500),[r]),h=e=>{if("ArrowDown"!==e.key&&"ArrowUp"!==e.key)return;const t=null===i?0:c.current.indexOf(i);let n;if("ArrowDown"===e.key){const e=t+1===c.current.length?0:t+1;n=c.current[e]}else{const e=t-1<0?c.current.length-1:t-1;n=c.current[e]}l(n),n.focus()};return m.exports.useEffect((()=>{var t;return n(e.items.filter((e=>e.label.toLocaleLowerCase().includes(a.toLocaleLowerCase()))).slice(0,null!=(t=e.limit)?t:50))}),[a]),d.createElement(d.Fragment,null,d.createElement("div",{className:j,ref:u},d.createElement(O,s(o({},e.input),{onFocus:()=>l(null),onChange:e=>v(e.target.value),onKeyDown:e=>h(e)})),d.createElement("ul",{className:S},t.map((t=>d.createElement("li",{key:t.id,className:I},d.createElement("a",{onClick:a=>{a.preventDefault(),e.onClickItem(t),n([])},onKeyDown:e=>h(e),ref:e=>null!==e?c.current.push(e):null,className:L},t.label)))))))}function T(){const{saveCities:e,citiesSaved:t}=m.exports.useContext(N);return{savedCities:t,addNewCity:m.exports.useCallback((t=>{e((e=>e.some((e=>t.id===e.id))?e:[...e,t]))}),[t]),deleteCity:m.exports.useCallback((t=>{e((e=>e.filter((e=>e.id!==t.id))))}),[t])}}function q(){const{cities:e}=function(){const{cities:e}=m.exports.useContext(w),t=m.exports.useCallback((t=>e.find((e=>e.id===t))),[e]);return{cities:e,findCity:t}}(),{addNewCity:t}=T();return d.createElement(D,{input:{placeholder:"Busca tu ciudad"},limit:10,placeholder:"Localidad",items:e.map((e=>({id:e.id,label:e.nombre,value:e}))),onClickItem:e=>{t(e.value)}})}var F="_aside_1qbb5_1",J="_hamburguer_1qbb5_14",P="_separator_1qbb5_26",R="_selectedCity_1qbb5_30",z="_header_1qbb5_34",Y="_close_1qbb5_39";function B({onClickCity:e}){const{savedCities:t}=T(),[n,a]=m.exports.useState(null),[r,i]=m.exports.useState(!1);m.exports.useEffect((()=>{null===n&&t.length>0&&l(t[0])}),[t]);const l=t=>{a(t),e(t)};return d.createElement(d.Fragment,null,d.createElement("svg",{onClick:()=>i(!0),viewBox:"0 0 100 80",width:"80",className:J,height:"60",style:{display:r?"none":"initial"}},d.createElement("rect",{width:"150",height:"20"}),d.createElement("rect",{y:"30",width:"150",height:"20"}),d.createElement("rect",{y:"60",width:"150",height:"20"})),d.createElement("aside",{className:F,hidden:!r},d.createElement("a",{className:Y,onClick:e=>{e.preventDefault(),i(!1)}}),d.createElement(q,null),t.map((e=>d.createElement("div",{className:n===e?R:"",onClick:()=>l(e),key:e.id},e.nombre))),d.createElement("div",{className:P}),d.createElement("div",{className:z},"Detalles Climáticos"),d.createElement("div",{className:P})))}var A="_noCitySelected_1k0l9_18",H="_weatherContent_1k0l9_26",U="_cityInfo_1k0l9_37",W="_city_1k0l9_37",G="_subTitle_1k0l9_55";var $="_ldsRipple_jewt7_1";function Q({show:e,children:t}){return d.createElement(d.Fragment,null,e?d.createElement("div",{className:$},d.createElement("div",null),d.createElement("div",null)):t)}function K({loading:e,weather:t}){var n,a;const r=new Date,i=null==(n=null==t?void 0:t.estadoCielo.find((e=>e.hour===r.getHours().toString())))?void 0:n.value,l=null==(a=null==t?void 0:t.temperatura.find((e=>e.hour===r.getHours().toString())))?void 0:a.value.toFixed(0);return d.createElement(d.Fragment,null,void 0===t?d.createElement("p",{className:A},"Abre el menú y busca tu ciudad. "):null,d.createElement("main",null,d.createElement("div",{className:H},d.createElement(Q,{show:e||void 0===t},d.createElement("div",null,d.createElement("h1",null,l,"º")),d.createElement("div",{className:U},d.createElement("h2",{className:W},null==t?void 0:t.name),d.createElement("small",{className:G},v(r,"HH:mm - eeee, d LLLL",{locale:h}))),d.createElement("div",{className:U},d.createElement("img",{src:`./weather-icons/${void 0!==i?null==i?void 0:i.toString():""}.svg`}))))))}function X(){const[e,t]=m.exports.useState(),{loading:n,weather:a}=function(e){const[t,n]=m.exports.useState(!1),[a,r]=m.exports.useState();return m.exports.useEffect((()=>{null!=e&&(n(!0),_(e).then((e=>r(e))).finally((()=>n(!1))))}),[e]),{weather:a,loading:t}}(null==e?void 0:e.id);return d.createElement(d.Fragment,null,d.createElement("div",{className:k,style:{background:`url('${void 0===a?"./day-sunny.jpg":b(a)}') no-repeat center center fixed`}},d.createElement(B,{onClickCity:e=>t(e),loading:n,weather:a}),d.createElement(K,{loading:n,weather:a})))}function Z(){return d.createElement(X,null)}c.defaults.baseURL="https://opendata.aemet.es/opendata/api/",c.defaults.params={api_key:"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJzYW5jaGlzMTk5MkBnbWFpbC5jb20iLCJqdGkiOiIyNDk5YTI0OS00NmMzLTRiNDMtYTA0YS02MGY1M2Q5NTY2NzIiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTYzMTM5OTQ4NiwidXNlcklkIjoiMjQ5OWEyNDktNDZjMy00YjQzLWEwNGEtNjBmNTNkOTU2NjcyIiwicm9sZSI6IiJ9.wCeUbIJ5IuX5x2F4h2Cq1cM75zuhMs2nv-miLfmke1k"},g.render(d.createElement(d.StrictMode,null,d.createElement(C,null,d.createElement(x,null,d.createElement(Z,null)))),document.getElementById("root"));
