var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r));"undefined"!=typeof require&&require;import{a as s,R as u,r as m,l as p,j as d,u as f,S as E,b as h,c as v}from"./vendor.a25fbad5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const _=u.createContext({municipios:[],setMunicipios:e=>null});function g({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{p.getItem("municipios").then((e=>{null===e||0===e.length?async function(){return await s.get("maestro/municipios").then((e=>e.data)).then((e=>e.map((e=>l(c({},e),{CODIGOINE:e.CODIGOINE.substr(0,5)})))))}().then((async e=>await p.setItem("municipios",e))).then((e=>n(e))).catch((e=>console.error(e))):n(e)})).catch((e=>console.error(e)))}),[]),u.createElement(_.Provider,{value:{municipios:t,setMunicipios:n}},e)}const O=u.createContext({municipiosGuardados:[],guardarMunicipios:()=>{}});function N({children:e}){const[t,n]=m.exports.useState([]);return m.exports.useEffect((()=>{p.setItem("municipiosGuardados",t).catch((e=>console.error(e)))}),[t]),m.exports.useEffect((()=>{p.getItem("municipiosGuardados").then((e=>{null!==e&&e.length>0&&n(e)})).catch((e=>console.error(e)))}),[]),u.createElement(O.Provider,{value:{municipiosGuardados:t,guardarMunicipios:n}},e)}function b(){const{municipios:e}=m.exports.useContext(_),t=m.exports.useCallback((t=>e.find((e=>e.CODIGOINE===t))),[e]);return{municipios:e,findMunicipio:t}}function y(e){const{municipios:t,findMunicipio:n}=b(),[r,a]=m.exports.useState(!1),[i,o]=m.exports.useState();return m.exports.useEffect((()=>{const t=n(e);void 0!==t&&(a(!0),async function(e,t){return await s.get(`provincias/${e}/municipios/${t}`).then((e=>e.data))}(t.CODPROV,t.CODIGOINE).then((e=>o(e))).finally((()=>a(!1))))}),[e,t]),{tiempo:i,loading:r}}function I(e){const{tiempo:t}=y(e.id);return u.createElement(u.Fragment,null,u.createElement("pre",null,u.createElement("code",null,JSON.stringify(t,null,2))))}var C="_video_1cbf3_1",x="_videoContainer_1cbf3_7",w="_indexContainer_1cbf3_17",k="_containerMunicipios_1cbf3_26";var D="_autoCompleteBox_bmfp7_1",G="_autocompleteWrapper_bmfp7_11",M="_item_bmfp7_15",L="_itemLink_bmfp7_20";var S="_input_gsffu_1";function P(e){var t;return u.createElement(u.Fragment,null,u.createElement("input",l(c({},e),{className:`${S} ${null!=(t=e.className)?t:""}`})))}function j(e){const[t,n]=m.exports.useState([]),[r,a]=m.exports.useState(""),[i,o]=m.exports.useState(null),s=m.exports.useRef([]),p=m.exports.useRef(null);m.exports.useEffect((()=>(document.addEventListener("click",f,!1),()=>{document.removeEventListener("click",f,!1)})),[]);const f=e=>{null===(null==p?void 0:p.current)||p.current.contains(e.target)||n([])},E=m.exports.useCallback(d((e=>a(e)),500),[a]),h=e=>{if("ArrowDown"!==e.key&&"ArrowUp"!==e.key)return;const t=null===i?0:s.current.indexOf(i);let n;if("ArrowDown"===e.key){const e=t+1===s.current.length?0:t+1;n=s.current[e]}else{const e=t-1<0?s.current.length-1:t-1;n=s.current[e]}o(n),n.focus()};return m.exports.useEffect((()=>{var t;return n(e.items.filter((e=>e.label.toLocaleLowerCase().includes(r.toLocaleLowerCase()))).slice(0,null!=(t=e.limit)?t:50))}),[r]),u.createElement(u.Fragment,null,u.createElement("div",{className:G,ref:p},u.createElement(P,l(c({},e.input),{onFocus:()=>o(null),onChange:e=>E(e.target.value),onKeyDown:e=>h(e)})),u.createElement("ul",{className:D},t.map((t=>u.createElement("li",{key:t.id,className:M},u.createElement("a",{onClick:r=>{r.preventDefault(),e.onClickItem(t),n([])},onKeyDown:e=>h(e),ref:e=>null!==e?s.current.push(e):null,className:L},t.label)))))))}function F(){const{guardarMunicipios:e,municipiosGuardados:t}=m.exports.useContext(O);return{municipiosGuardados:t,addNewMunicipio:m.exports.useCallback((t=>{e((e=>e.some((e=>t.CODIGOINE===e.CODIGOINE))?e:[...e,t]))}),[t]),deleteMunicipio:m.exports.useCallback((t=>{e((e=>e.filter((e=>e.CODIGOINE!==t.CODIGOINE))))}),[t])}}function R(){const{municipios:e}=b(),[,t]=f(),{addNewMunicipio:n}=F();return u.createElement(j,{input:{placeholder:"Busca tu ciudad"},limit:10,placeholder:"Localidad",items:e.map((e=>({id:e.CODIGOINE,label:e.NOMBRE,value:e}))),onClickItem:e=>{n(e.value),t(`/t/${e.id}`)}})}var B="_municipio_1phhg_1",$="_municipioNombre_1phhg_10",A="_subTitle_1phhg_16",q="_municipioTemperatura_1phhg_27";var K="_ldsRipple_jewt7_1";function T({show:e,children:t}){return u.createElement(u.Fragment,null,e?u.createElement("div",{className:K},u.createElement("div",null),u.createElement("div",null)):t)}function U({municipio:e}){const{loading:t,tiempo:n}=y(e.CODIGOINE);return u.createElement(u.Fragment,null,u.createElement("div",{className:B,key:e.CODIGOINE},u.createElement("span",{className:$},e.NOMBRE),u.createElement(T,{show:t},u.createElement("h1",{className:q}," ",null==n?void 0:n.temperatura_actual,"ยบ"),u.createElement("span",{className:A},"Max: ",null==n?void 0:n.temperaturas.max,"ยบ Min: ",null==n?void 0:n.temperaturas.min),u.createElement("span",{className:A},"Humedad: ",null==n?void 0:n.humedad,"%"),u.createElement("span",{className:A},"Cielo: ",null==n?void 0:n.stateSky.description))))}function H(){const{municipiosGuardados:e}=F();return u.createElement(u.Fragment,null,u.createElement("div",{className:w},u.createElement(R,null),u.createElement("div",{className:k},e.map((e=>u.createElement(U,{municipio:e,key:e.CODIGOINE}))))),u.createElement("div",{className:x},u.createElement("video",{autoPlay:!0,className:C,loop:!0},u.createElement("source",{src:"https://weather.asanchis.dev/assets/video.a0c259db.webm"}))))}function J(){return u.createElement(u.Fragment,null,u.createElement(E,null,u.createElement(h,{path:"/",component:H}),u.createElement(h,{path:"/t/:id"},(e=>u.createElement(I,{id:e.id})))))}s.defaults.baseURL="https://opendata.aemet.es/opendata/api/",s.defaults.headers.api_key="",v.render(u.createElement(u.StrictMode,null,u.createElement(g,null,u.createElement(N,null,u.createElement(J,null)))),document.getElementById("root"));
